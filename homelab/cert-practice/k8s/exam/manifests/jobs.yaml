apiVersion: batch/v1
kind: Job
metadata:
  name: multi-container-startup
spec:
  template:
    spec:
      containers:
      - name: frontend-init
        image: your-frontend-image:latest
        command: ["/bin/sh", "-c"]
        args: ["npm install && npm run build"]
        resources:
          limits:
            memory: "256Mi"
            cpu: "500m"
        
      - name: backend-init
        image: your-backend-image:latest
        command: ["/bin/sh", "-c"]
        args: ["python manage.py migrate && python manage.py collectstatic --noinput"]
        resources:
          limits:
            memory: "256Mi"
            cpu: "500m"
        
      - name: database-init
        image: your-database-image:latest
        command: ["/bin/sh", "-c"]
        args: ["./init-db.sh"]
        resources:
          limits:
            memory: "256Mi"
            cpu: "500m"

      restartPolicy: Never
